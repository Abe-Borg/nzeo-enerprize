{% extends 'base.html' %}

{% block content %}

<style type = "text/css">
    html,
    body {
        height: 100%;
    }

    .form-signin {
        max-width: 330px;
        padding: 1rem;
    }

    .form-signin .form-floating:focus-within {
        z-index: 2;
    }

    .form-signin input[type="email"] {
        margin-bottom: 10px;
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
    }

    .form-signin input[type="username"] {
        margin-bottom: 10px;
        border-top-left-radius: 0;
        border-top-right-radius: 0;
    }

    .h3 {
        text-align: center;
    }

    .blog-posts {
        max-width: 500px;
        width: 100%;
        margin: auto;
    
    }

</style>

<main class="form-signin w-100 m-auto">
    <form method = "post">{% csrf_token %}
      <h1 class="h3 mb-3 fw-normal">Account</h1>
  
      <div class="form-floating">
        <input name = "email" type="email" class="form-control" id="floatingInput" placeholder="name@example.com" required autofocus value = "{{account_form.initial.email}}" >
        <label for="floatingInput">Email address</label>
      </div>
      <div class="form-floating">
        <input name = "username" type="text" class="form-control" id="inputUsername" placeholder="Username" required value = "{{account_form.initial.username}}">
        <label for="floatingPassword">Username</label>

        {% for field in account_form %}
        <p>            
            {% for error in field.errors %}
                <p style = "color: red;">{{error}}</p>
            {% endfor %}

            {% if account_form.non_field_errors %}
                {% for error in account_form.non_field_errors %}
                    <p style = "color: red;">{{error}}</p>
                {% endfor %}
            {% endif %}

        </p>
        {% endfor %}
      </div>
  
      <div class="form-check text-start my-3">
        <input class="form-check-input" type="checkbox" value="remember-me" id="flexCheckDefault">
        <label class="form-check-label" for="flexCheckDefault">
          Remember me
        </label>
      </div>

      <button class="btn btn-primary w-100 py-2" type="submit">Save changes</button>
    </form>

    <div class = "d-flex flex-column">
      <a href = "{% url 'password_change' %}" class = "btn btn-primary w-100 py-2 my-2">Change password</a>
    </div>

    <!-- Display messages from the messages framework -->
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}" role="alert">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <div class = "container mt-4 p-4">
      <div class = "row">
        <div class = "blog-posts">
          <h3 class = "mb-3 font-weight-normal">
            Blog posts:
          </h3>
          {% if blog_posts %}
            <ul>
              {% for post in blog_posts %}
                <a href = "{% url 'blog:detail' post.slug %}" style = "text-decoration: none;">
                  <li class = "list-group-item">{{post}}</li>
                </a>
              {% endfor %}
            </ul>
          {% else %}
            <p>You have no blog posts. Create a post <a href = "{% url 'blog:create' %}">here</a>.</p>
          {% endif %}
        </div>
      </div>

    </div>

  </main>

{% endblock content %}